#!/bin/sh
set -eu

c_h_S_files=$(find -name '*.c' -o -name '*.h' -o -name '*.S')
etags --declarations $c_h_S_files

makefiles=$(find -name 'Makefile*')
etags --append -l makefile $makefiles

kconfigs=$(find -name 'Kconfig*')
etags --append -l none -r '/^config \([A-Z0-9_]+\)$/CONFIG_\1/' $kconfigs
